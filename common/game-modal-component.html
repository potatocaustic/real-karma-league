<!-- 
  This file contains the self-contained HTML and CSS for the game details modal.
  It can be copied into any page to provide modal functionality.
  The related JavaScript logic for fetching and displaying data remains in the page-specific JS file (e.g., RKL-S8.js).
-->
<style>
    /*
    ===================================================================
    == MODAL STYLES (Self-Contained) ==
    ===================================================================
    */
    .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        overflow-y: auto;
    }

    .modal-content {
        background-color: #fff;
        margin: 2rem auto;
        border-radius: 8px;
        width: 95%;
        max-width: 900px;
        max-height: 90vh;
        overflow-y: auto;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        transition: background-color 0.3s;
    }

    .modal-header {
        background-color: #333;
        color: white;
        padding: 1.5rem;
        border-radius: 8px 8px 0 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .modal-header h3 {
        color: white;
        margin: 0;
        font-size: 1.4rem;
        flex: 1;
    }

    .modal-header-icons {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .icon-btn {
        background: none;
        border: none;
        color: white;
        cursor: pointer;
        padding: 0.5rem;
        border-radius: 4px;
        transition: background-color 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .icon-btn:hover {
        background-color: rgba(255, 255, 255, 0.1);
    }

    .icon-btn.active {
        background-color: rgba(255, 255, 255, 0.2);
    }

    .close-btn {
        background: none;
        border: none;
        color: white;
        font-size: 1.5rem;
        cursor: pointer;
        padding: 0.5rem;
        border-radius: 4px;
        transition: background-color 0.3s;
    }

    .close-btn:hover {
        background-color: rgba(255, 255, 255, 0.1);
    }

    .modal-body {
        padding: 2rem;
    }

    #game-flow-chart-area {
        padding: 1rem;
        min-height: 400px;
    }

    #game-flow-chart {
        max-height: 500px;
    }

    .game-details-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
    }

    .team-breakdown {
        background-color: #f8f9fa;
        border-radius: 8px;
        overflow: hidden;
        border: 1px solid #ddd;
        transition: background-color 0.3s, border-color 0.3s;
    }

    .team-breakdown.winner {
        border-color: #28a745;
        border-width: 2px;
    }

    .modal-team-header {
        background-color: #333;
        color: white;
        padding: 1rem 1.5rem;
        display: flex;
        align-items: center;
        justify-content: center; /* Horizontally center the content */
        gap: 1rem;
        transition: background-color 0.3s;
        cursor: pointer;
    }

    /* New wrapper for easier centering and alignment */
    .modal-team-info-wrapper {
        display: inline-flex;
        align-items: center;
        gap: 0.75rem;
    }

    .modal-team-header.winner {
        background-color: #28a745;
    }

    .modal-team-header h4 {
        color: white;
        margin: 0;
        font-size: 1.3rem;
    }
    
    .modal-team-record {
        font-size: 1rem;
        opacity: 0.8;
    }

    .modal-team-header .team-logo {
        width: 40px;
        height: 40px;
        border-radius: 4px;
    }

    .team-total {
        background-color: #e9ecef;
        padding: 1rem;
        text-align: center;
        font-weight: bold;
        font-size: 1.1rem;
        border-bottom: 2px solid #ddd;
        transition: background-color 0.3s, border-color 0.3s;
    }

    .lineup-table {
        width: 100%;
        border-collapse: collapse;
    }

    .lineup-table th {
        background-color: #f8f9fa;
        padding: 0.8rem 0.5rem;
        text-align: center;
        font-weight: bold;
        border-bottom: 2px solid #ddd;
        font-size: 0.9rem;
        transition: background-color 0.3s, border-color 0.3s;
    }

    .lineup-table th:first-child {
        text-align: left;
        width: 50%;
    }

    .lineup-table th:nth-child(2),
    .lineup-table th:nth-child(3) {
        width: 25%;
    }

    .lineup-table td {
        padding: 0.8rem 0.5rem;
        border-bottom: 1px solid #eee;
        font-size: 0.9rem;
        text-align: center;
        transition: border-color 0.3s;
    }

    .lineup-table td:first-child {
        text-align: left;
    }

    .lineup-table tr:hover {
        background-color: white;
    }

    .captain-row {
        background-color: #fff3cd !important;
        font-weight: bold;
    }

    .captain-badge {
        background-color: #ffc107;
        color: #333;
        padding: 0.2rem 0.5rem;
        border-radius: 12px;
        font-size: 0.7rem;
        font-weight: bold;
        margin-left: 0.5rem;
    }

    .captain-bonus {
        font-size: 0.75rem;
        color: #ffc107;
        font-weight: 500;
        margin-top: 0.2rem;
    }

    .player-name-cell {
        font-weight: 500;
    }

    .player-link {
        color: #007bff;
        text-decoration: none;
        font-weight: 500;
        transition: color 0.3s ease;
    }

    .player-link:hover {
        color: #0056b3;
        text-decoration: underline;
    }

    .points-cell {
        text-align: center;
        font-weight: bold;
    }

    .rank-cell {
        text-align: center;
        color: #666;
    }
    .team-total {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .live-indicator-modal {
        display: inline-block;
        width: 10px;
        height: 10px;
        background-color: #dc3545;
        border-radius: 50%;
        margin-left: 8px;
        vertical-align: middle;
        animation: pulse-live 1.5s infinite;
    }

    @keyframes pulse-live {
        0% { opacity: 1; }
        50% { opacity: 0.4; }
        100% { opacity: 1; }
    }

    /*
    ===================================================================
    == DARK MODE STYLES ==
    ===================================================================
    */
    .dark-mode .modal-content {
        background-color: #1e1e1e;
    }

    .dark-mode .close-btn:hover {
        background-color: rgba(255, 255, 255, 0.2);
    }

    .dark-mode .team-breakdown {
        background-color: #2c2c2c;
        border-color: #444;
    }

    .dark-mode .team-breakdown.winner {
        border-color: #66bb6a;
    }

    .dark-mode .modal-team-header.winner {
        background-color: #2e7d32;
    }

    /* MODIFIED for Request 2: Made 'Total' section distinct in dark mode */
    .dark-mode .team-total {
        background-color: #3a3a3a;
        border-top: 1px solid #4f4f4f;
        border-bottom: 2px solid #4f4f4f;
    }

    .dark-mode .lineup-table th {
        background-color: #2c2c2c;
        border-bottom-color: #444;
    }

    .dark-mode .lineup-table td {
        border-color: #333;
    }

    .dark-mode .lineup-table tr:hover {
        background-color: #383838;
    }

    .dark-mode .captain-row {
        background-color: #4a4100 !important;
    }

    .dark-mode .captain-badge {
        background-color: #ffe082;
        color: #121212;
    }

    .dark-mode .player-link {
        color: #8ab4f8;
    }

    .dark-mode .player-link:hover {
        color: #a7c7fa;
    }
    
    .dark-mode .rank-cell {
        color: #aaa;
    }

    /*
    ===================================================================
    == MEDIA QUERIES (RESPONSIVE DESIGN) ==
    ===================================================================
    */
    @media (max-width: 768px) {
        .modal-content {
            margin: 1rem;
            width: calc(100% - 2rem);
        }

        .game-details-grid {
            grid-template-columns: 1fr;
            gap: 1rem;
        }

        .modal-body {
            padding: 1rem;
        }

        .lineup-table th, .lineup-table td {
            padding: 0.5rem 0.3rem;
            font-size: 0.8rem;
        }

        .modal-team-header .team-logo {
            width: 36px;
            height: 36px;
        }

        .modal-header {
            padding: 1rem;
        }

        .modal-header h3 {
            font-size: 1.1rem;
            line-height: 1.3;
            word-break: break-word;
            hyphens: auto;
        }
    }

    @media (max-width: 480px) {
        .modal-header {
            padding: 0.8rem;
        }

        .modal-header h3 {
            font-size: 1rem;
            line-height: 1.2;
        }
    }
</style>

<div id="game-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="modal-title">Game Details</h3>
            <div class="modal-header-icons">
                <button class="icon-btn" id="game-flow-chart-btn" title="Game Flow Chart" style="display: none;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
                        <path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/>
                        <path d="M0 0h24v24H0z" fill="none"/>
                    </svg>
                </button>
                <button class="close-btn" id="close-modal-btn">&times;</button>
            </div>
        </div>
        <div class="modal-body">
            <div id="game-details-content-area">
                <div class="loading">Loading game details...</div>
            </div>
            <div id="game-flow-chart-area" style="display: none;">
                <canvas id="game-flow-chart"></canvas>
            </div>
        </div>
    </div>
</div>
